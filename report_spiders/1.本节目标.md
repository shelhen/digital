# 本章任务：
## 一、明确目标：我们的目的是希望通过年报文本来刻画数字化转型程度
### 1.赵宸宇、吴非、袁淳都是完全使用词频来刻画数字化转型指数的，具体词频之间存在区别
### 2.吴非具体操作
#### (1)剔除关键词前存在“没”“无"“不”等否定词语的表述（剔除否定词，停留词等）
#### (2)剔除部分数字英文，保留如B2B等
#### (3)同时也剔除非本公司(包括公司的股东、客户、供应商、公司高管简介介绍在内)的“数字化转型”关键词。
#### (4)进行关键词词频统计，求关键词频合计，最后进行对数化处理，从而构建最终的企业数字化转型的指标体系
#### (5)补充：吴非将关键词进行了三阶段分类：第一阶段分为数字技术应用和商业模式转型，第二阶段四类，第三阶段75个关键词
### 3.赵宸宇具体操作
#### (1)保留经营情况分析部分(MDA)的文本数据
（针对2007-2014年、2015年、2016-2017年上市公司年报，分别将“董事会报告”、“管理层讨论与分析”、“经营情况讨论与分析”部分文本内容提取出来。）
#### (2)基于Python的Jieba中文分词功能对所有企业的上市年报该部分文本数据进行分词和词频统计，并制作成词云图。
#### (3)对结果进行标准化处理，并使用熵值法确定各指标权重，最终得到制造业上市公司数字化发展总指数DIGI

### 4.袁淳具体操作
#### (1)以国家政策语义体系为基础构建企业数字化术语词典
对中央人民政府(http://www.gov.cn)及工业和信息化部(www.mit.gov.cn)网站进行检索，人工筛选得到2012~2018年期间发布的30份重要的国家层面数字经济相关政策文件，
#### (2)提取文本后，借助数字经济相关的国家政策语义表述，采用文本挖掘（机器学习）方法，提取到197个频率大于等于5次的企业数字化相关词汇，构建相对完备的数字化关键词词典。
#### (3)同赵宸宇，提取MDA文文本，对以上获取的关键词计算关键词频
#### (4)考虑到年报 MD&A 部分文本长度的差异，在提取得到每家上市公司每年年报中各个关键词的出现频率后，
企业数字化相关词汇频数总和除以年报MD&A语段长度衡量微观企业数字化程度（Digital）为了表述方便，本文将该指标乘以 100。 Digital 指标数值越大，表示企业数字化程度越高。
### 5.财务报表附注中披露的年末**无形资产明细项**中与数字化相关的部分占无形资产总额的比例————祁怀锦
祁怀锦,曹修琴,刘艳霞.数字经济对公司治理的影响——基于信息不对称和管理者非理性行为视角[J].改革,2020(04):50-64.
### 6.问卷法测量企业数字化转型程度
### 7.总结
#### (1)吴非和赵宸宇的关键词是确定的，而袁淳的关键词不确定，事实上，袁淳的关键词比较笼统，因此结果也是近似结果，没必要过分深究关键词
#### (2)对于文本统计范畴而言，吴非以除其他公司表述以外的全部文本为基础，而赵宸宇/袁淳选择以经营情况和管理层讨论与分析部分的文本为基础，显然后者更具科学，因此有必要提取该部分文本数据
#### (3)其他都是相似处理，主要包括，去除否定词、停留词、通过jieba分词，计算关键词词频
#### (4)结果上，吴非直接使用词频总数，赵宸宇使用标准化后的词频数据，并结合熵权法求digital,袁淳则选择用总词频数除以MDA总文本长度*100来衡量数字化转型水平
#### (5)袁淳的结果相对而言更科学，因此可以采取他的方式:
```python
袁淳的关键字中包含了吴飞赵宸宇的关键字
袁淳选择M&DA文本相对更科学
袁淳选择总词频除以词频总数也更科学，如果需要还可以再按照赵宸宇的方式进行标准化！
```
### 8.任务梳理
#### (1)整理三方选择的关键词形成我的关键词池（袁淳）
#### (2)目前所有市面上的MD&A部分文本数据都仅仅截止到2021年，我需要截至到2022年，因此可以选择仅仅爬取2022年的数据
#### (3)需要从年报中提取MDA文本
#### (4)需要对管检测进行分类统计词频
#### (5)最终测度数字化转型程度
### 9.优化处理
#### (1)考虑到后期可能会探究数字化指数对企业绩效的影响，因此可以考虑使用csmar数字化转型指标和赵宸宇数字化转型程度，他们都将数字化转型区分为多个子变量，便于进一步研究。
#### (2)但是赵宸宇的数字化专心程度测度没有考虑MDA总词频数目，因此我们可以考虑这一点。

## 二、开发爬虫爬取年报
### 1.开发一个爬虫，能根据时间和股票代码获取当年的年报数据,结果输出为下载链接,用以进一步筛选。
### 2.筛选下载链接
#### （1）整理出这些名录，包含股票代码和年份的下载地址。
#### （2）洗年报链接，确保我们获得的年报链接是年报链接（不是半年报告、英文报告什么的）、唯一（不会受更新影响的年报链接）
### 3.下载报告，并转化为txt文档
#### （1）爬虫下载数据
#### （2）将所有pdf年报直接转化为txt文本
注意：直接转化的文本数据有以下问题，有的可能完全是图片内容、有的是编译后的文本乱码、还有的乱码后解析出*n的中文文本

## 三、提取MDA文本
### 1.提取的文本存在大量问题
#### (1)无文本
#### (2)文本重复\缺失\错位等问题
#### (3)繁体字报告
#### (4)不同年份不同企业 MDA文本所处的位置不同
### 2.处理对策
#### (1)对于无文本的年报，尝试使用ocr工具提取文本，腾讯、阿里的文本提取结果较为精准但是存在问题即太贵！平均10块钱一份文档
因此考虑使用开源ocr teleseach，但是结果有时候会出现问题，而且速度很慢
#### (2)繁体字报告
使用python第三方库zhconv将繁体字转化简体字即可
#### (3)文本错乱问题 - 考虑使用ocr工具
#### (4)考虑放弃一些文本，存在问题的报告不足300份，而实际获得了5w份报告，扔掉也是可以考虑的
#### (5)不同年份不同企业 MDA文本所处的位置不同
观察规律，使用 正则表达式匹配锚点，获取位置，截取关键年报即可。
### 3.最终成功提取所有年报MDA文本
接下来咱们将结果整理到一个pandas中与以前的数据合并在一起就好了。

## 四、关键词频统计
### 1.分别将三者的关键词写入config，先取三者补集
### 2.将所有MDA文本提取到一个表格中
### 3.计算每一段文本的关键词并统计各个关键词的词频在保存在一个新的表格中

## 五、看一些其他数字化转型指数的计算方法，如无形资产投入/问卷调查......
### 1.数字化转型程度的测度，根据之前的分析，分别计算数字化转型程度。
### 2.数据空值处理方法，检测出空值，用插值法填充，如果无法填充，删除空值；
### 3.异常值处理，先对数据进行异常值处理，对异常值进行缩尾处理。
### 4.观察数据条形图，数字化转型是否在不断提高

csmar数字化转型指数